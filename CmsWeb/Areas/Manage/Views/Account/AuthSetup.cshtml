@model Google.Authenticator.SetupCode
@{
    ViewBag.Title = "Two-factor Authentication Setup";

    if ((bool?)ViewData["hasshell"] == true)
    {
        Layout = "_ShellLayout.cshtml";
    }
    else
    {
        Layout = "_Layout.cshtml";
    }
}
<style>
    form {
        overflow: hidden;
    }
    #step1, #step2 {
        transition: opacity 0.5s ease;
    }
    form.step2 #step1 {
        opacity: 0;
    }
    form.step1 #step2 {
        opacity: 0;
    }
    form.step2 .fieldset-wrapper {
        left: -100%;
    }
    .fieldset-wrapper {
        left: 0;
        position: relative;
        transition: all 0.5s ease;
        width: 200%;
    }
    .fieldset-wrapper fieldset {
        float: left;
        width: 50%;
    }
    .fieldset-wrapper fieldset input[name="passcode"] {
        width: 40px;
        padding: 10px 0;
        font-weight: bold;
        font-size: 24px;
    }
    .qrcode {
        max-width: 300px;
        width: 100%;
    }
    .passcode {
        margin-bottom: 196px;
    }
    .passcode-title {
        margin-bottom: 130px;
    }
</style>
<h1 class="form-header">@ViewBag.Title</h1>
@if (ViewBag.Message != null)
{
    <h3 class="alert alert-danger">@ViewBag.Message</h3>
}
@using (Html.BeginForm("AuthSetup", "Account", FormMethod.Post, new { @class = "panel step1" }))
{
<div class="fieldset-wrapper">
    <fieldset id="step1">
        <div class="form-group text-center">
            <h3>Scan this code with the authenticator app</h3>
            <img class="img-responsive qrcode" src="@Html.HttpsUrl(Model.QrCodeSetupImageUrl)" />
        </div>
        @*<div class="form-group text-center">
                <h4>or copy and paste this code to pair your device</h4>
                <input readonly class="text-primary" style="width:100%" value="@Model.ManualEntryKey" />
            </div>*@
        <div class="form-actions">
            <h4>Click continue after you have scanned the code</h4>
            <button id="continue" class="btn btn-primary btn-block btn-lg">Continue</button>
        </div>
    </fieldset>
    <fieldset id="step2">
    @Html.Partial("TwoFactorPasscode")    
    </fieldset>
</div>
}
@section scripts
{
    <script>
        $(function () {
            $('#continue, #back').click(function (event) {
                event.preventDefault();
                $('form').toggleClass('step1 step2');
            });
        });
    </script>
}
